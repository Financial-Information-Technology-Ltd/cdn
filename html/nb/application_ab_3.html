<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>{%(1)Step 3}</title>
<link rel="stylesheet" type="text/css" href="{STYLESHEET_PATH}">
</head>
<body onload="initialise()">
  <form method="post" action="%SERVLET_PATH%">
    {ERRORS}
    <table>
      <tr>
        <td class="title" colspan="2">{HELP_LINK}{%(2)Policy Details}</td>
      </tr>
      <tr>
        <td style="width: 30%">{%(4)Start Date}</td>
        <td>
          <input name="StartDate" size="16">
          {DATE_FORMAT}
        </td>
      </tr>
      <tr>
        <td>{%(5)Payment Term}</td>
        <td>
          <input name="PaymentTerm" onchange="total_premium()" size="10">
        </td>
      </tr>
      <tr>
        <td>{%(6)Policy Term}</td>
        <td>
          <input name="MaturityYears" size="10">
        </td>
      </tr>
      <tr>
        <td>{%(7)Retirement Age}</td>
        <td>
          <input name="RetirementAge" size="10">
        </td>
      </tr>
      <tr>
        <td>{%(8)Premium Amount}</td>
        <td>
          <input name="PremiumAmount" onchange="total_premium()" size="20">
          ({%(9)min.} {MINIMUM_PREMIUM_MONTH} Euro)
        </td>
      </tr>
      <tr>
        <td>{%(10)Face Amount}</td>
        <td>
          <input name="FaceAmount" size="20">
        </td>
      </tr>
      <tr>
        <td>{%(11)Mode/Method}</td>
        <td>
          <select name="ModeMethod" onchange="total_premium()">
            <option value="">&nbsp;</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>{%(12)Total Premium}</td>
        <td>
          <input name="TotalPremium" tabindex="-1" disabled onkeypress="return false" size="20">
        </td>
      </tr>
      <tr>
        <td>{%(13)Currency}</td>
        <td>
          <select name="Currency">
            <option value="">&nbsp;</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>{%(46)Number of Segments}</td>
        <td>
          <input name="NoOfSegments" size="6">
        </td>
      </tr>
      <tr>
        <td>{%(47)Risk Category}</td>
        <td>
          <select name="RiskCategory">
            <option value="">&nbsp;</option>
          </select>
        </td>
      </tr>
      <tr>
        <td colspan=2>
          <input type="checkbox" name="IncomePayments">
          {%(16)Income Payments}
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td style="width: 20%">{%(14)Premium Escalation}</td>
        <td style="width: 10%">
          <input type="checkbox" value="ON" name="DynamicOptionBox" onclick="dynamic_option(1)">
        </td>
        <td style="width: 30%">{%(44)Premium Escalation Rate}</td>
        <td>
          <input name="PremiumEscalationRate" size="10">
        </td>
      </tr>
      <tr>
        <td>{%(15)Face Amount Escalation}</td>
        <td>
          <input type="checkbox" value="ON" name="FaceAmountEscalationBox" onclick="dynamic_option(2)">
        </td>
        <td>{%(45)Face Amount Escalation Rate}</td>
        <td>
          <input name="FaceAmountEscalationRate" size="10">
        </td>
      </tr>
    </table>
    <!--%(ADDITIONAL_RIDERS)-->
    <table>
      <tr>
        <th colspan="4">{%(41)Additional Riders}</th>
      </tr>
      <tr>
        <th style="width: 40">&nbsp;</th>
        <th>{%(42)}Plan</th>
        <th>{%(43)}Face Amount</th>
        <th></th>
      </tr>
      <!--{RIDER_LIST}-->
    </table>
    <!--%-->
    <table class="navigation">
      <tr>
        <td align="left">
          <input class="button" name="PrevButton" type="submit" value="&lt; {%(19)Previous}">
        </td>
        <td align="right">
          <input class="button" name="NextButton" type="submit" value="{%(20)Next} &gt;">
        </td>
      </tr>
    </table>
    <input type="hidden" name="MaturityType" value="Y">
    <input type="hidden" name="DynamicOption" value="0">
    <input type="hidden" name="FaceAmountEscalation" value="0">
  </form>
</body>
<script type="text/javascript">
function initialise()
{
  set_focus();
  setDynamicOptionInitValue();
  setFaceAmountEscInitValue();
}
function setDynamicOptionInitValue()
{
  element = document.forms[0].elements["DynamicOption"];
  if (typeof(element)=="undefined")
    return;
  element1 = document.forms[0].elements["DynamicOptionBox"];
  if (typeof(element1)=="undefined")
    return;
  if (element.value=="1")
    element1.checked = true;
   else
    element1.checked = false;
}
function setFaceAmountEscInitValue()
{
  element = document.forms[0].elements["FaceAmountEscalation"];
  if (typeof(element)=="undefined")
    return;
  element1 = document.forms[0].elements["FaceAmountEscalationBox"];
  if (typeof(element1)=="undefined")
    return;
  if (element.value=="1")
    element1.checked = true;
   else
    element1.checked = false;
}
function total_premium()
{
  p_element = document.forms[0].elements["PremiumAmount"];
  if (typeof(p_element)=="undefined")
    return;
  m_element = document.forms[0].elements["ModeMethod"];
  if (typeof(m_element)=="undefined")
    return;
  t_element = document.forms[0].elements["PaymentTerm"];
  if (typeof(t_element)=="undefined")
    return;
  v_element = document.forms[0].elements["ModeMethodMult"];
  if (typeof(v_element)=="undefined")
    return;
  r_element = document.forms[0].elements["TotalPremium"];
  if (typeof(r_element)=="undefined")
    return;
  premium = parse_float(p_element.value);
  if (isNaN(premium))
    return;
  s = format_float(premium,2);
  if (s!=p_element.value)
    p_element.value = s;
  term = parseInt(t_element.value);
  if (isNaN(term))
    return;
  pos = m_element.selectedIndex;
  if (pos==0)
    return;
  mult = 0;
  cnt = 0;
  s = "";
  value = v_element.value;
  for (i=0; i<=value.length; i++)
  {
    if (i==value.length)
    {
      if (cnt==pos)
        mult = parseInt(s);
      break;
    }
    if (value.charAt(i)==';')
    {
      if (cnt==pos)
      {
        mult = parseInt(s);
        break;
      }
      cnt++;
      s = "";
    }
    else
     s += value.charAt(i);
  }
  if (isNaN(mult))
  {
    r_element.value = "";
    return;
  }
  if (mult==0)
  {
    r_element.value = "";
    return;
  }
  v = Math.round(premium*mult*term);
  if (v<100)
  {
    r_element.value = "";
    return;
  }
  r_element.value = format_float(v,2);
}
function dynamic_option(field_no)
{
  element = document.forms[0].elements["DynamicOption"];
  if (typeof(element)=="undefined")
    return;
  element1 = document.forms[0].elements["DynamicOptionBox"];
  if (typeof(element1)=="undefined")
    return;
  element2 = document.forms[0].elements["FaceAmountEscalation"];
  if (typeof(element)=="undefined")
    return;
  element3 = document.forms[0].elements["FaceAmountEscalationBox"];
  if (typeof(element1)=="undefined")
    return;
  if (field_no==1 || field_no==0)
  {
    if (element1.checked)
    {
      element.value = "1";
      element2.value = "0";
      element3.checked = false;
    }
    else
     element.value = "0";
  }
  if (field_no==2 || field_no==0)
  {
    if (element3.checked)
    {
      element2.value = "1";
      element.value = "0";
      element1.checked = false;
    }
    else
     element2.value = "0";
  }
  if (field_no!=0)
    dynamic_option(0);
}
</script>
</html>
