<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>{%(1)Contact Customer Service}</title>
<link rel="stylesheet" type="text/css" href="{STYLESHEET_PATH}">
<style type="text/css">
.label {
	width: 350px;
	float: left;
	text-align: right;
	margin: 0.3em 0.5em 0 0;
	display: block;
}

li {
	list-style-type: none;
    padding-top: 5px;
    padding-bottom: 10px;
}

fieldset {
	padding: 0px;
	margin: 0px;
}

textarea {
	width: 400px;
	height: 250px;
}

a {
	float: right;
}
</style>
</head>
<body>
  <form method="post" enctype="multipart/form-data" action="%SERVLET_PATH%">
    <section id="errors">{ERRORS}</section>
    <div class="rounded">
      <h1 class="h1_es">{%(1)Contact Customer Service}</h1>
    </div>
    <section>
      <fieldset>
        <ul id="mainUl">
          <li>
            <label class="label" for="PolicyNo">
              <span>{%(2)Please select policy}</span>
            </label>
            <select id="PolicyNo" name="PolicyNo">
              <option></option>
            </select>
          </li>
          <li>
            <label class="label" for="ContactReason">
              <span>{%(3)Contact Reason}</span>
            </label>
            <select id="ContactReason" name="ContactReason">
              <option></option>
            </select>
          </li>
          <li>
            <label class="label" for="Description">{%(4)Enter contact request information. Include best contact method.}</label>
            <textarea id="Description" name="Description"></textarea>
          </li>
        </ul>
      </fieldset>
      <input type="submit" name="SubmitButton" id="SubmitButton" value="{%(5)Submit}">
      <a href="%BACK_LINK%">
        {%(101)Return}
        <img src="/lf/images/back.gif" alt="" />
      </a>
    </section>
  </form>
</body>
<script>
function processAttachments() {
	var i = 0;
	max = 0;
	var input = document.getElementById('DocumentFile_'+i);
	while (input != null) {
		if (input.value=='') {
			var li = document.getElementById('mainLi_'+i);
		    li.parentNode.removeChild(li);
		}
		else {
			var li = document.getElementById('mainLi_'+i);
			li.id = 'mainLi_'+max;
			var labels = document.querySelectorAll('[for="DocumentFile_'+i+'"]');
			Array.prototype.forEach.call(labels, function(label) {
				label.htmlFor = 'DocumentFile_'+max;
			});
			input.id = 'DocumentFile_'+max;
			input.name = 'DocumentFile_'+max;
			max++;
		}
		i++;
		input = document.getElementById('DocumentFile_'+i);
	}
	addOneAttachment(max);
} 
function addOneAttachment(i) {
	var labelVal = '{%(7)Add an attachment}';
	var mainUl = document.getElementById('mainUl');
	var li = document.createElement('li');
	li.id = 'mainLi_'+i;
	var label1 = document.createElement('label');
	label1.className = 'label';
	label1.htmlFor = 'DocumentFile_'+i;
	var input = document.createElement('input');
	input.type = 'file';
	input.name = 'DocumentFile_'+i;
	input.id = 'DocumentFile_'+i;
    var label2 = document.createElement('label');
	label2.innerHTML = labelVal;
	label2.htmlFor = 'DocumentFile_'+i;
	li.appendChild(label1);
	li.appendChild(input);
	li.appendChild(label2);
	mainUl.appendChild(li);
    input.addEventListener('change', function(e) {
	  var fileName = e.target.value.split('\\').pop();
	  if (fileName) {
	    label2.innerHTML = fileName + "<img class=\"delete\" src=\"{IMAGE_PATH}delete.png\" id=\"deleteButton_"+i+"\">";
	    document.getElementById('deleteButton_'+i).addEventListener('click', function(e) {
	    	delAttachment(e, input);
	    	});
	  }
	  else {
	    label2.innerHTML = labelVal;
	  }
	  processAttachments();
	});
}
processAttachments();
</script>
</html>