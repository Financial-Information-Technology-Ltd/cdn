<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>{%(1)Add a Segment}</title>
<link rel="stylesheet" type="text/css" href="{STYLESHEET_PATH}">
</head>
<body>
  <form action="%SERVLET_PATH%" method="post">
    {ERRORS}
    <table>
      <tr>
        <td class="title" colspan=2>{HELP_LINK}{%(2)Add a Segment}</td>
      </tr>
      <tr>
        <th style="width: 30%">{%(3)Policy No}</th>
        <td>{PolicyKey}</td>
      </tr>
      <tr>
        <th>{%(4)Original Premium}</th>
        <td>{OriginalPremium}</td>
      </tr>
      <tr>
        <th>{%(5)Additional Premium}</th>
        <td>
          <input type="text" name="AdditionalPremium">
        </td>
      </tr>
      <tr>
        <th>{%(6)Amount/Percent?}</th>
        <td>
          <select name="ValueType"></select>
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <th colspan=2>{%(10)Existing Segments}</th>
      </tr>
      <tr>
        <th style="width: 30%">{%(11)Segment}</th>
        <th>{%(13)Premium}</th>
      </tr>
      <!--{OldSegmentTable}-->
      <tr>
        <th>{%(14)Total Original Premium}</th>
        <td align="right">
          <b>{OriginalPremium}</b>
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <th colspan=3>{%(15)New Segments}</th>
      </tr>
      <tr>
        <th>{%(11)Segment}</th>
        <th>{%(12)Value}</th>
        <th>{%(13)Premium}</th>
      </tr>
      <!--{NewSegmentTable}-->
      <tr>
        <th colspan=2>{%(16)Total New Premium}</th>
        <td>
          <input type="text" name="TotalNewPremium" READONLY DISABLED>
        </td>
      </tr>
      <tr>
        <td colspan=3>
          <input type="submit" name="AddButton" value="{%(17)Add}">
        </td>
      </tr>
    </table>
    <table class="navigation">
      <tr>
        <td>
          <input type="submit" name="SubmitButton" value="{%(100)Submit}">
        </td>
        <td class="return">
          <a href="%BACK_LINK%">
            {%(101)Return}
            <img src="%BACK_IMAGE%" alt="{%(666)Back}">
          </a>
        </td>
      </tr>
    </table>
  </form>
</body>
<script type="text/javascript">
function value_changed(field_name)
{
  float_changed(field_name,2);
  c_element = document.forms[0].elements["ValueCount"];
  v_count = parseInt(c_element.value,10);
  if (isNaN(v_count))
    v_count = 0;
  total = 0;
  value_type = document.forms[0].elements["ValueType"].value;
  for (index=0; index<v_count; index++)
  {
    name1 = "Value_"+index;
    element1 = document.forms[0].elements[name1];
    name2 = "Premium_"+index;
    element2 = document.forms[0].elements[name2];
    if (value_type=="P")
    {
      element3 = document.forms[0].elements["AdditionalPremium"];
      if (element1.value!="" && element3.value!="")
      {
        perc_value = parse_float(element1.value);
        total_value = parse_float(element3.value);
        element2.value = format_float((total_value*perc_value/100),2);
      }
      else
       element2.value = "";
    }
    else
    {
      element2.value = element1.value;
    }
    if (element2.value!="")
      total += parse_float(element2.value);
  }
  t_element = document.forms[0].elements["TotalNewPremium"];
  t_element.value = format_float(total,2);
  return true;
}
</script>
</html>
